LSMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.CalculateLSMAValue=function(a,b){for(var c=0,d=0,e=0,f=0;f<this.options.period;f++){var g=this.indicators.getIndicatorOrPriceValue(a[b-f],this.options.appliedTo);d+=g,c+=b-f,e+=g*(b-f)}var h=(this.options.period*e-c*d)/(this.options.period*c-Math.pow(c,2)),i=1/this.options.period,j=i*d-h*i*c,k=h*b+j;return toFixed(k,4)};for(var d=0;d<a.length;d++){if(d>=this.options.period){var e=this.CalculateLSMAValue(a,d);this.indicatorData.push({time:a[d].time,value:e})}else this.indicatorData.push({time:a[d].time,value:null});this.priceData.push(a[d])}},LSMA.prototype=Object.create(IndicatorBase.prototype),LSMA.prototype.constructor=LSMA,LSMA.prototype.addPoint=function(a){this.priceData.push(a);var b=this.CalculateLSMAValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},LSMA.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.CalculateLSMAValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},LSMA.prototype.toString=function(){return"LSMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"};