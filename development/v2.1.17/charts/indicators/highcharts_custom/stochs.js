STOCHS=function(a,b,c){b.fastKMaType=(b.fastKMaType||"SMA").toUpperCase(),b.slowKMaType=(b.slowKMaType||"SMA").toUpperCase(),b.slowDMaType=(b.slowDMaType||"SMA").toUpperCase(),IndicatorBase.call(this,a,b,c),this.uniqueID=[uuid(),uuid()],this.stochf=new STOCHF(a,{fastKPeriod:this.options.fastKPeriod,fastKMaType:this.options.fastKMaType,appliedTo:this.options.appliedTo},c),this.kMa=new window[this.options.slowKMaType](this.stochf.kData,{period:this.options.slowKPeriod,maType:this.options.slowKMaType},c),this.indicatorData=this.kMa.indicatorData;var d=[];this.indicatorData.forEach(function(a){d.push({time:a.time,close:a.value})}),this.dData=new window[b.slowDMaType](d,{period:this.options.slowDPeriod,maType:this.options.slowDMaType},c)},STOCHS.prototype=Object.create(IndicatorBase.prototype),STOCHS.prototype.constructor=STOCHS,STOCHS.prototype.addPoint=function(a){var b=this.stochf.addPoint(a)[0].value,c=this.kMa.addPoint({time:a.time,close:b})[0].value;this.indicatorData=this.kMa.indicatorData;var d=this.dData.addPoint({time:a.time,close:c})[0].value;return[{id:this.uniqueID[0],value:c},{id:this.uniqueID[1],value:d}]},STOCHS.prototype.update=function(a){var b=this.stochf.update(a)[0].value,c=this.kMa.update({time:a.time,close:b})[0].value;this.indicatorData=this.kMa.indicatorData;var d=this.dData.update({time:a.time,close:c})[0].value;return[{id:this.uniqueID[0],value:c},{id:this.uniqueID[1],value:d}]},STOCHS.prototype.toString=function(){return"STOCHS ("+this.options.slowKPeriod+", "+this.options.slowDPeriod+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},STOCHS.prototype.buildSeriesAndAxisConfFromData=function(a){var b=[];this.indicatorData.forEach(function(a){b.push([a.time,a.value])});var c=[];return this.dData.indicatorData.forEach(function(a){c.push([a.time,a.value])}),[{axisConf:{id:a.id+"-"+this.uniqueID[0],title:{text:this.toString(),align:"high",offset:0,rotation:0,y:10,x:30+7.5*this.toString().length},lineWidth:2,plotLines:this.options.levels}},{seriesConf:{id:this.uniqueID[0],name:this.toString(),data:b,type:"line",yAxis:a.id+"-"+this.uniqueID[0],color:this.options.stroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!1}},{seriesConf:{id:this.uniqueID[1],name:"%D",data:c,type:"line",yAxis:a.id+"-"+this.uniqueID[0],color:this.options.dStroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!1}}]},STOCHS.prototype.getIDs=function(){return this.uniqueID},STOCHS.prototype.isSameInstance=function(a){return _.isEqual(a.sort(),this.uniqueID)};