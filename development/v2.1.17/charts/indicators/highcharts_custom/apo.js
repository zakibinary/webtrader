APO=function(a,b,c){b.fastMaType=(b.fastMaType||"SMA").toUpperCase(),b.slowMaType=(b.slowMaType||"SMA").toUpperCase(),IndicatorBase.call(this,a,b,c);var d={maType:b.slowMaType,period:b.slowPeriod,appliedTo:b.appliedTo},e={maType:b.fastMaType,period:b.fastPeriod,appliedTo:b.appliedTo};this.fastMa=new window[b.fastMaType](a,e,c),this.slowMa=new window[b.slowMaType](a,d,c);for(var f=0;f<a.length;f++)if(f>=this.options.slowPeriod){var g=toFixed(this.fastMa.indicatorData[f].value-this.slowMa.indicatorData[f].value,4);this.indicatorData.push({time:a[f].time,value:g})}else this.indicatorData.push({time:a[f].time,value:0})},APO.prototype=Object.create(IndicatorBase.prototype),APO.prototype.constructor=APO,APO.prototype.addPoint=function(a){var b=this.fastMa.addPoint(a)[0].value,c=this.slowMa.addPoint(a)[0].value,d=toFixed(b-c,4);return this.indicatorData.push({time:a.time,value:d}),[{id:this.uniqueID,value:d}]},APO.prototype.update=function(a){var b=this.indicatorData.length-1,c=this.fastMa.update(a)[0].value,d=this.slowMa.update(a)[0].value,e=toFixed(c-d,4);return this.indicatorData[b].value=e,[{id:this.uniqueID,value:e}]},APO.prototype.toString=function(){return"APO ("+this.options.fastPeriod+", "+this.options.slowPeriod+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"};