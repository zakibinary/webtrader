define(["exports","jquery","../windows/windows","../workspace/workspace","moment","text!./chrome.html","../common/util"],function(a,b,c,d,e,f){"use strict";function g(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(a,"__esModule",{value:!0});var h=g(b),i=g(c),j=g(d),k=g(e),l=g(f),m=null;setTimeout(function(){var a=function(){var a=local_storage.get("chrome"),b=!a;if(!b){var c=a.accepted_or_cancel_time;if(b=!c,!b){var d=k["default"].utc().valueOf()-c;b=d>=6048e5}}return b},b=a();if(b&&window.chrome&&chrome.webstore&&h["default"]("#webtrader-extension-is-installed").length<=0){if(m)return void m.moveToTop();var c=h["default"](l["default"]).i18n();m=i["default"].createBlankWindow(c,{dialogClass:"dialog-confirm",width:350,height:150,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,modal:!0,ignoreTileAction:!0}),c.find("#apply").on("click",function(){m.dialog("close"),chrome.webstore.install(),local_storage.set("chrome",{accepted_or_cancel_time:k["default"].utc().valueOf()})}),c.find("#cancel").on("click",function(){m.dialog("close"),local_storage.set("chrome",{accepted_or_cancel_time:k["default"].utc().valueOf()})}),h["default"]("body").append(m.dialog("widget")),m.dialog("open")}},5e3),j["default"].events.on("tile",function(){m&&m.dialog("isOpen")&&(m.dialog("close"),m.moveToTop())}),a["default"]={}});