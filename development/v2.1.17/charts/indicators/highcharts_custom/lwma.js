LWMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){if(d>=this.options.period-1){for(var e=0,f=0,g=this.options.period-1;g>=0;g--)e+=c.getIndicatorOrPriceValue(a[d-g],this.options.appliedTo)*(d-g),f+=d-g;var h=toFixed(e/f,4);this.indicatorData.push({time:a[d].time,value:h})}else this.indicatorData.push({time:a[d].time,value:null});this.priceData.push(a[d])}},LWMA.prototype=Object.create(IndicatorBase.prototype),LWMA.prototype.constructor=LWMA,LWMA.prototype.addPoint=function(a){this.priceData.push(a);for(var b=0,c=0,d=this.options.period-1;d>=0;d--){var e=this.priceData.length-1;b+=this.indicators.getIndicatorOrPriceValue(this.priceData[e-d],this.options.appliedTo)*(e-d),c+=e-d}var f=toFixed(b/c,4);return this.indicatorData.push({time:a.time,value:f}),[{id:this.uniqueID,value:f}]},LWMA.prototype.update=function(a){var b=0,c=0,d=this.priceData.length-1;this.priceData[d].open=a.open,this.priceData[d].high=a.high,this.priceData[d].low=a.low,this.priceData[d].close=a.close;for(var e=this.options.period-1;e>=0;e--)b+=this.indicators.getIndicatorOrPriceValue(this.priceData[d-e],this.options.appliedTo)*(d-e),c+=d-e;var f=toFixed(b/c,4);return this.indicatorData[d].value=f,[{id:this.uniqueID,value:f}]},LWMA.prototype.toString=function(){return"LWMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"};